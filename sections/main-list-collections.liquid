<div class="py-8">
  <section class="max-w-6xl mx-auto px-4 md:px-8">
    {% paginate collections by section.settings.number_of_products_per_page %}
      <h1 class="text-base md:text-2xl font-bold text-center mb-8 text-gray-800">
        {{ section.settings.title }}
      </h1>

      <div
        class="
          grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-8
          {% if section.settings.products_per_row == 2 %}lg:grid-cols-2
          {% elsif section.settings.products_per_row == 3 %}lg:grid-cols-3
          {% elsif section.settings.products_per_row == 4 %}lg:grid-cols-4
          {% elsif section.settings.products_per_row == 5 %}lg:grid-cols-5
          {% endif %}
        "
      >
        {% for collection in collections %}
          {% comment %} 作成したメタフィールドが True じゃない場合だけ表示 {% endcomment %}
          {% if collection.metafields.custom.hide_from_list.value != true %}
            <a href="{{ collection.url }}" class="group block">
              <div class="aspect-square overflow-hidden rounded-lg bg-gray-100 mb-4">
                {% if collection.image %}
                  <img
                    src="{{ collection.image | image_url: width: 600 }}"
                    alt="{{ collection.title | escape }}"
                    class="w-full h-full object-cover transition duration-500 group-hover:scale-105"
                    loading="lazy"
                  >
                {% elsif collection.products.first.featured_image %}
                  <img
                    src="{{ collection.products.first.featured_image | image_url: width: 600 }}"
                    alt="{{ collection.title | escape }}"
                    class="w-full h-full object-cover transition duration-500 group-hover:scale-105"
                    loading="lazy"
                  >
                {% else %}
                  {{ 'collection-1' | placeholder_svg_tag: 'w-full h-full bg-gray-200' }}
                {% endif %}
              </div>

              <h2 class="text-base md:text-lg font-bold text-gray-900 group-hover:text-[#C2A992] transition text-center">
                {{ collection.title }}
              </h2>
              {% comment %} <p class="text-xs md:text-sm text-gray-500 text-center mt-1">{{ collection.all_products_count }} items</p> {% endcomment %}
            </a>
          {% endif %}
        {% endfor %}
      </div>

      {% if paginate.pages > 1 %}
        <div class="mt-12">
          {% render 'pagination', paginate: paginate %}
        </div>
      {% endif %}
    {% endpaginate %}
  </section>
</div>

{% schema %}
{
  "name": "Main List Collections",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "ページタイトル",
      "default": "すべてのコレクション"
    },
    {
      "type": "range",
      "id": "products_per_row",
      "min": 2,
      "max": 5,
      "step": 1,
      "label": "1行あたりのコレクション数（デスクトップ）",
      "default": 4
    },
    {
      "type": "range",
      "id": "number_of_products_per_page",
      "min": 8,
      "max": 48,
      "step": 4,
      "label": "1ページあたりの表示件数",
      "default": 8
    }
  ]
}
{% endschema %}

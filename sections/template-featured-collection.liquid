{% paginate collection.products by 8 %}
  <div class="px-5 py-8 mx-auto max-w-7xl">
    <h1 class="text-3xl font-bold mb-8 text-center text-gray-800">
      {{ collection.title | default: 'Products' }}
    </h1>

    {% if collection.products.size > 0 %}
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8">
        {% for product in collection.products %}
          <div class="flex flex-col h-full">
            <a href="{{ product.url }}" class="group block h-full">
              <div class="overflow-hidden bg-gray-100 rounded-xl aspect-[3/4]">
                {% if product.featured_image %}
                  <img
                    src="{{ product.featured_image | img_url: '600x' }}"
                    alt="{{ product.title | escape }}"
                    class="w-full h-full object-cover transition duration-500 group-hover:scale-110"
                    loading="lazy"
                  >
                {% else %}
                  {{ 'collection-6' | placeholder_svg_tag: 'w-full h-full object-cover bg-gray-200' }}
                {% endif %}
              </div>

              <div class="mt-4 flex flex-col items-center">
                <h3 class="text-sm md:text-base text-gray-600 font-medium text-center">
                  {{ product.title }}
                </h3>
                <p class="mt-1 text-lg font-bold text-gray-900">
                  {{ product.price | money }}
                </p>
              </div>
            </a>
          </div>
        {% endfor %}
      </div>

      {% if paginate.pages > 1 %}
        <div class="mt-12 flex justify-center gap-2">
          {% if paginate.previous %}
            <a href="{{ paginate.previous.url }}" class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-100"
              >前へ</a
            >
          {% endif %}

          {% for part in paginate.parts %}
            {% if part.is_link %}
              <a href="{{ part.url }}" class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-100">
                {{ part.title }}
              </a>
            {% else %}
              <span class="px-4 py-2 bg-gray-800 text-white rounded">{{ part.title }}</span>
            {% endif %}
          {% endfor %}

          {% if paginate.next %}
            <a href="{{ paginate.next.url }}" class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-100"
              >次へ</a
            >
          {% endif %}
        </div>
      {% endif %}
    {% else %}
      <div class="text-center py-16">
        <p class="text-xl text-gray-500">商品がまだ登録されていません</p>
      </div>
    {% endif %}
  </div>
{% endpaginate %}
